<link rel="stylesheet" href="/client/styles/jquery/smoothness/jquery-ui-1.7.1.all.css?&iuqt=1">
<link rel="stylesheet" href="https://foundation.uc.edu/file/custom-content-parts/css/bb-custom-form_display.css" type="text/css" />
<style>
  
  .form-page.row {
  		margin: 0;
  }
  
  .form-page.row > .form-field-complex {
  		padding: 0;
  }
  
</style>

<div class="message-form "></div> <!-- Removed class: container -->

<!--<script src="/file/js/edq-validate.js" type="text/javascript"></script>-->

<script>
    //templates
    var BBCustomFormPage = 1;
    var BBCustomFormPages = 1;
  	var $row = $('<div class="form-field-complex col-md-12"></div>'); // removed class 'custom-form'
  	var $contentwrapper = $('<div class="content-wrapper"></div>');
    var $label = $('<label></label>');
    var $text = $('<p></p>');
    var $div = $('<div></div>');
    var $link = $('<a href="#">Test Link</a>');
  	var $calloutcard = $('<div class="callout-card background-gray"></div>');

    var $image = $('<img src="" >');
    var $cardTitle = $('<p class="large"></p>');
	
  	var $accordionText = $('<h3><button aria-expanded="true" class="Accordion-trigger" aria-controls="sect1" id="accordion1id"><span class="Accordion-title"><span class="Accordion-icon"></span></span></button></h3>');

  	var $accordionContent = $('<div id="sect1" role="region" aria-labelledby="accordion1id" class="Accordion-panel"></div>');

    var $byline = $('<div class="byline"></div>');
    var $bylineAuthorDiv = $('<div class="author"></div>');
  	var $bylineDate = $('<span class="date"></span>');
    var $bylineName = $('<span class="name"></span>');
    var $bylinePhone = $('<span class="phone"></span>');
    var $bylineEmail = $('<span class="email"></span>');
  	var $bylineSocialMedia = $('<span class="social-media"></span>');

    var $option = $('<option></option>');
    var $button = $('<button type="button" class="button-primary next btn btn-lg btn-block btn-primary"></button>');
    var $help = $('<small id="passwordHelpBlock" class="form-text text-muted"></small>');

  	var $pullquote = $('<div class="pull-quote"></div>');
  // var $quotesource = $('<p class="pull-quote-attribution"><span></span></p>');

    var $page = $('<div class="form-page row"></div>');

    var $fieldtemplate = {};
    $fieldtemplate["heading1"] = $('<h1></h1>');
    $fieldtemplate["heading2"] = $('<h2></h2>');
    $fieldtemplate["heading3"] = $('<h3></h3>');
  	$fieldtemplate["subheading"] = $('<p class="large"></p>');

    $fieldtemplate["yes/no"] = $('<input type="checkbox" />');
    $fieldtemplate["text"] = $('<p></p>');
    $fieldtemplate["card"] = $('<div class="card"></div>');
    $fieldtemplate["hr"] = $('<hr>');
    $fieldtemplate["image"] = $('<div class="image"></div>');
  	$fieldtemplate["pagetitle"] = $('<div class="page-title"></div>');

    // $fieldtemplate["accordion"] = $('<div class="accordion" data-aria-accordion></div>');
  	$fieldtemplate["accordion"] = $('<div id="accordionGroup" class="Accordion" data-allow-toggle>');

    $fieldtemplate["blockquote"] = $('<blockquote class="pull-quote"></blockquote>');
    $fieldtemplate["phone"] = $('<input type="tel" class="form-control phone" />');
    $fieldtemplate["email"] = $('<input type="email" class="form-control email" />');
    $fieldtemplate["date"] = $('<input type="text" class="form-control datepicker" placeholder="DD/MM/YYYY" />');
    $fieldtemplate["time"] = $('<input type="time" class="form-control" />');
    // $fieldtemplate["code table"] = $('<select class="form-control"></select>');
    $fieldtemplate["event category"] = $('<select class="event-category form-control"></select>');
    $fieldtemplate["address"] = $('<input type="text" class="form-control" />');
    $fieldtemplate["postcode"] = $('<input type="text" class="form-control" />');
    $fieldtemplate["suburb"] = $('<input type="text" class="form-control" />');
    $fieldtemplate["state"] = $('<select class="state form-control"></select>');

    var hasPageBreak = false;

    function initBBCustomForm(data) {
        /*
		if (!$('div[id$="_divComment"]').length) {
            console.error("Sorry, the comments field was not enabled.  Please edit the Interaction Form and ensure that the commment is available editable.");
            return false;
        } else {
            $('div[id$="_divComment"]').hide();
        } 
	  */
        var $form = $('.message-form');
        $form.children().not('.form-wrap').addClass("col-md-12");

        $form.prepend($page.clone().append($form.find('.form-wrap').siblings()));

        $('span.error:contains("required")').siblings('input,select').addClass('required');

        $.each(data.settings.items, function(i, item) {
          	console.log(item);
            if (item.type !== "page break") {
                if (item.type == "heading1") {
                    var $newRow = $contentwrapper.clone()
                        .append($row.clone()
                        	.append($fieldtemplate[item.type].clone().text(item.question))
                        );
                } else if (item.type == "heading2") {
                    var $newRow = $contentwrapper.clone()
                        .append($row.clone()
                        	.append($fieldtemplate[item.type].clone().text(item.question))
                        );
                } else if (item.type == "heading3") {
                    var $newRow = $contentwrapper.clone()
                        .append($row.clone()
                        	.append($fieldtemplate[item.type].clone().text(item.question))
                        );
                } else if (item.type == "subheading") {
                    var $newRow = $contentwrapper.clone()
                        .append($row.clone()
                        	.append($fieldtemplate[item.type].clone().text(item.question))
                        );                  
                } else if (item.type == "blockquote") {
                    var $newRow = $contentwrapper.clone()
                        .append($row.clone()
                        	.append($pullquote.clone()
                        		.append(($fieldtemplate[item.type].clone().text(item.quoteText)))
                                	.append("<p class='pull-quote-attribution'><span>" + item.quoteSource.trim() + "</span><p>")
                        	)
                        );
                } else if (item.type == "card") {
                    var $newRow = $row.clone()
                        .append(($fieldtemplate[item.type].clone()
                            .append($image.clone().attr("src", item.cardImgSrc.trim()))
                            .append($div.clone()
                                .append($cardTitle.clone().text(item.cardTitle.trim()))
                                .append($text.clone().text(item.cardText.trim()))
                                .append($link.clone().attr("href", item.cardLinkUrl.trim()).text(item.cardLinkText.trim()))
                            )
                        ));
                
                
                } else if (item.type == "pagetitle") {
                     var $newRow = $fieldtemplate[item.type].clone()
                        .append($contentwrapper.clone()
                        	.append("<h1>" + item.pageTitle.trim() + "</h1>")
                        );
                  
                } else if (item.type == "image") {
                    var marginVals;
                    switch (item.imageAlign) {
                        case "left":
                            marginVals = "0 auto 0 0";
                            break;
                        case "center":
                            marginVals = "0 auto";
                            break;
                        case "right":
                            marginVals = "0 0 0 auto";
                    }
                    if (item.fullPageWidth =='Yes' ) {
                 	    var $newRow = $row.clone()
                        	.append(($fieldtemplate[item.type].clone()
                            	.append($image.clone().attr("src", item.imageSrc.trim()))
                            	.append($text.clone().text(item.imageCaption.trim()).css('text-align', 'center'))
                        	));
                	} else {
                    	var $newRow = $contentwrapper.clone()
                        	.append($row.clone().css('margin', marginVals)
                        		.append(($fieldtemplate[item.type].clone()
                            		.append($image.clone().attr("src", item.imageSrc.trim()))
                            		.append($text.clone().text(item.imageCaption.trim()).css('text-align', 'center'))
                        	)));
                    }
                        
                } else if (item.type == "accordion") {
                    var $newRow = $contentwrapper.clone()
                        .append($row.clone()
                        //.append(($fieldtemplate[item.type].clone()
                       		.append('<button id="accordion-open-' + item.index + '" class="accordion__button">' + item.accordionText.trim() + '</button>')
                        	.append('<div id="accordion-section-' + item.index + '" class="accordion__section open">' + item.accordionContent.trim() + '</div>')
                        );             
                        
                } else if (item.type == "formattedtext") {
                    var $newRow = $contentwrapper.clone()
                        .append($row.clone()
                        	.append($div.clone().html(item.formattedText.trim())));
                } else if (item.type == "calloutbox") {
                    var $newRow = $contentwrapper.clone()
                        .append($row.clone()
                        	.append($calloutcard.clone().html(item.calloutText.trim())));
                        
                } else if (item.type == "nextfrontiers") {
                    var $newRow = $contentwrapper.clone()
                        .append($row.clone()
                        	.append($calloutcard.clone().html("<p class='card-header'>Explore Our Next Frontiers</p><p>As the thriving research nexus of our region, the University of Cincinnati is solving problems with unrivaled talent who push the boundaries of discovery and innovation for the greater good. Your investment in <strong><em>Next, <span style='color: #e00122; font-weight: inherit;'>Now</span>: The Campaign for Cincinnati</em></strong> can launch UC research and innovation to the next frontiers that await us.</p>")));
                } else if (item.type == "nextnow") {
                    var $newRow = $contentwrapper.clone()
                        .append($row.clone()
                        	.append($calloutcard.clone().html("<p class='card-header'><em>NEXT, NOW</em></p><p>With its focus on innovation and impact, <strong><em>Next, <span style='color: #e00122; font-weight: inherit;'>Now</span>: The Campaign for Cincinnati</em></strong> is where ambition meets action. At the University of Cincinnati and UC Health, we’re driven by next; thinking bolder and dreaming bigger to create the tomorrow we envision, today.<br>What’s NEXT, starts with you.</p>")));
                } else if (item.type == "empowernext") {
                    var $newRow = $contentwrapper.clone()
                        .append($row.clone()
                        .append($calloutcard.clone().html("<p class='card-header'>Who will you empower <em>NEXT</em>?</p><p>Scholarships, fellowships and enrichment programs provide opportunities for students to attend, grow and graduate from UC. You can empower our next leaders through support for scholarships and signature programs in career-based education, co-op or professional development.</p>")));
                        
                } else if (item.type == "byline") {
                    var $newRow = $contentwrapper.clone()
                        .append($row.clone()
                        	.append($byline.clone()
                            	.append($bylineAuthorDiv.clone()                        
                                	.append($bylineName.clone().html("By <strong>" + item.authorName.trim() + "</strong>"))
                                	.append($bylineEmail.clone()
                                    	.append($link.clone()
                                        	.attr("href", "mailto:" + item.authorEmail.trim()).text("Email " + item.authorName.trim().split(" ")[0]))
                                	)
                                	.append($bylinePhone.clone().text(item.authorPhone.trim()))
                        		
                            	)
                        	).append("<div class='story'><span class='dateline'>" + item.datePublished.trim() + "</span><span class='sharing'><a data-pattern='https://www.facebook.com/sharer/sharer.php?u=URL' href='https://www.facebook.com/sharer/sharer.php?u=" + item.storyLinkUrl.trim() + "'><i class='fa fa-facebook-official' aria-hidden='true'></i><span class='sr-only'>Share on facebook</span></a> <a data-pattern='https://twitter.com/intent/tweet?url=URL' href='https://twitter.com/intent/tweet?url=" + item.storyLinkUrl.trim() + "'><i class='fa fa-twitter' aria-hidden='true'></i><span class='sr-only'>Share on Twitter</span></a> <a href='https://www.linkedin.com/shareArticle?mini=true&url=" + item.storyLinkUrl.trim() + "'><i class='fa fa-linkedin-square' aria-hidden='true'></i><span class='sr-only'>Share on LinkedIn</span></a> <a href='#' class='printPage'><i class='fa fa-print' aria-hidden='true'></i></a></span></div>"));
                        
                } else if (item.type == "hr") {
                    var $newRow = $contentwrapper.clone()
                        .append($row.clone().css('margin', '0 auto')
                        	.append(($fieldtemplate[item.type].clone())));
                        
               	} else {
                    var $newRow = $contentwrapper.clone()
                        .append($row.clone()
                        	.append($text.clone().text(item.question)));
                }


                if (item.help != null) {
                    if (item.help.trim().length > 0) {
                        $newRow.append($help.clone().text(item.help.trim()));
                    }
                }
                if (item.columns != null) {
                    $newRow.find('form-field-complex').removeClass('col-md-12');
                    $newRow.find('form-field-complex').addClass('col-md-' + item.columns);
                }
                        
                if (item.required == "on") {
                    $newRow.find('input, select').addClass('required');
                    $newRow.children('label').append(' <abbr title="Field is required">*</abbr>');
                }
                if (item.maxLength != null) {
                    $newRow.find('input').attr('maxlength', item.maxLength);
                }
                if (item.type == "event category") {
                    $.each(data.settings.ddEventCategories, function(key, value) {
                        $newRow.find('select').append($option.clone().attr('value', key).text(value));
                    });
                }
                if (item.type == "code table" && item.codeTableMulti == "off") {
                    $.get("/WebAPI/CodeTable/" + item.codeTableID, function(data) {
                        if (item.required !== "on") {
                            $newRow.find('select').append($option.clone());
                        }
                        $.each(data, function() {
                            $newRow.find('select').append($option.clone().attr('value', this.Id).text(this.Description));
                        });
                    });
                }
                if (item.type == "state") {
                    $.get("/WebAPI/Country/" + item.countryID + "/State", function(data) {
                        if (item.required !== "on") {
                            $newRow.find('select').append($option.clone());
                        }
                        $.each(data, function() {
                            $newRow.find('select').attr('autocomplete', item.question).append($option.clone().attr('value', this.Id).text(this.Abbreviation));
                        });
                    });
                }
                if (item.linkAttr == "on") {
                    $('#' + $('#InteractionAdd').find('label').filter(function() {
                        return $(this).text().trim() == item.linkAttrLabel.trim();
                    }).first().attr('for')).first().closest('.form-field-complex').hide();

                    $(document).on('change input', '#customField' + item.index, function() {

                        if (item.type == "yes\/no") {

                            var value = $(this).is(":checked");
                            $('#' + $('#InteractionAdd').find('label').filter(function() {
                                return $(this).text().trim() == item.linkAttrLabel.trim();
                            }).first().attr('for')).attr('checked', value);

                        } else {

                            var value = $(this).val();
                            $('#' + $('#InteractionAdd').find('label').filter(function() {
                                return $(this).text().trim() == item.linkAttrLabel.trim();
                            }).first().attr('for')).val(value);
                        }

                    });

                }

                if (item.conditional == "on") {
                    $newRow.addClass('hide');

                    var target = data.settings.items.filter(obj => {
                        return obj.index === item.conditionalCompare
                    });

                    $(document).on('change input', '#customField' + target[0].index, function() {
                        if (item.conditionalOperator == "equals") {

                            //checkbox equal to
                            if (target[0].type == "yes\/no") {
                                if ((item.conditionalFields.checkbox == "on") == $(this).is(':checked')) {
                                    $('#customField' + item.index).closest('.custom-form').removeClass('hide');
                                } else {
                                    $('#customField' + item.index).val("").removeAttr('checked').trigger('change').closest('.custom-form').addClass('hide');
                                }
                            }
                            //codetable equal to
                            else if (target[0].type == "code table") {
                                if (item.conditionalFields.codetable == $(this).val()) {
                                    $('#customField' + item.index).closest('.custom-form').removeClass('hide');
                                } else {
                                    $('#customField' + item.index).val("").removeAttr('checked').trigger('change').closest('.custom-form').addClass('hide');
                                }
                            }
                            //codetable equal to
                            else if (target[0].type == "event category") {
                                if (item.conditionalFields.eventcategory == $(this).val()) {
                                    $('#customField' + item.index).closest('.custom-form').removeClass('hide');
                                } else {
                                    $('#customField' + item.index).val("").removeAttr('checked').trigger('change').closest('.custom-form').addClass('hide');
                                }
                            }
                            //other field (text, phone, email etc.)
                            else {
                                if (item.conditionalFields.textfield == $(this).val()) {

                                    $('#customField' + item.index).closest('.custom-form').removeClass('hide');
                                } else {

                                    $('#customField' + item.index).val("").removeAttr('checked').trigger('change').closest('.custom-form').addClass('hide');
                                }
                            }


                        }
                        if (item.conditionalOperator == "not") {
                            //checkbox not equal to
                            if (target[0].type == "yes\/no") {
                                if ((item.conditionalFields.checkbox == "on") != $(this).is(':checked')) {
                                    $('#customField' + item.index).closest('.custom-form').removeClass('hide');
                                } else {
                                    $('#customField' + item.index).val("").removeAttr('checked').trigger('change').closest('.custom-form').addClass('hide');
                                }
                            }
                            //codetable not equal to
                            else if (target[0].type == "code table") {
                                if (item.conditionalFields.codetable != $(this).val()) {
                                    $('#customField' + item.index).closest('.custom-form').show();
                                } else {
                                    $('#customField' + item.index).val("").removeAttr('checked').trigger('change').closest('.custom-form').addClass('hide');
                                }
                            }
                            //codetable not equal to
                            else if (target[0].type == "event category") {
                                if (item.conditionalFields.eventcategory != $(this).val()) {
                                    $('#customField' + item.index).closest('.custom-form').show();
                                } else {
                                    $('#customField' + item.index).val("").removeAttr('checked').trigger('change').closest('.custom-form').addClass('hide');
                                }
                            }
                            //other field (text, phone, email etc.)
                            else {
                                if (item.conditionalFields.textfield != $(this).val()) {
                                    $('#customField' + item.index).closest('.custom-form').show();
                                } else {
                                    $('#customField' + item.index).val("").removeAttr('checked').trigger('change').closest('.custom-form').addClass('hide');
                                }
                            }
                        }

                    });
                }
                        
                $form.find('.form-page').last().append($newRow);
                        
                $("main").find("p.large").first().addClass("sub-heading");                    
                
            } else {
                $page.clone().insertAfter($form.find('.form-page').last());
                BBCustomFormPages++;
                hasPageBreak = true;
            }

        });
                        
        const accordionButtons = document.querySelectorAll('.accordion__button');
        const accordionSections = document.querySelectorAll('.accordion__section');
                        
        accordionSections.forEach(section =>  {
        	section.setAttribute('aria-hidden', true)
            section.classList.remove('open')
      	})
                        
        accordionButtons.forEach(button => {
            button.setAttribute('aria-expanded', false);
                 
            const expanded = button.getAttribute('aria-expanded');
            const number = button.getAttribute('id').split('-').pop();
            const associatedSection = document.getElementById(`accordion-section-${number}`)
                        
            button.addEventListener('click', (e) => {
            	e.preventDefault();
                        
                button.classList.toggle('expanded');
                associatedSection.classList.toggle('open');
                if (button.classList.contains('expanded')) {
                  	button.setAttribute('aria-expanded', true);
                    associatedSection.setAttribute('aria-hidden', false);
               	} else {
                    button.setAttribute('aria-expanded', false);
                    associatedSection.setAttribute('aria-hidden', true);
                }
         	})
     	})
                        
        $('a.printPage').click(function(){
           	window.print();
           	return false;
		});

        //trigger required checkboxes to set attribute value by default
        $('.custom-form select, .custom-form input[type="checkbox"]').trigger('change');

        if (!$('#btnSubmitProxy').length) {
            $('<button type="button" id="btnSubmitProxy" class="button-primary next btn btn-lg btn-block btn-primary half-right" onclick="BBCustomFormSubmit();" style="display: none;">' + $('#InteractionAdd .form-wrap input').attr('value') + '</button>').insertBefore('#InteractionAdd .form-wrap input')
            $('#InteractionAdd .form-wrap input').hide();

        }

        if (!hasPageBreak) {
            $('#btnSubmitProxy').show();
        }
        if (hasPageBreak) {
            $('<button type="button" id="btnPrev" class="btn-outline-primary prev btn btn-lg btn-block half-left" style="display: none;">' + data.settings.txtButtonPrev + '</button>').insertAfter($form.find('#btnSubmitProxy'));
            $('<button type="button" id="btnNext" class="btn-primary next btn btn-lg btn-block">' + data.settings.txtButtonNext + '</button>').prependTo($form.find('.form-wrap'));
            $('#btnSubmitProxy').addClass('half-right').hide();

            $form.find('.form-page').hide().first().show();

            $(document).on('click', '#btnNext', function() {

                if (jQuery.isFunction(jQuery.validator)) {
                    var valid = $('#form1').validate({
                        ignore: ":not(:visible)"
                    }).form();

                    $('#form1').find('label.error:hidden').remove();
                    $('#form1').find('.error:hidden').removeClass('error');

                    if (valid || $("#form1").find('.error:visible').length == 0) {
                        BBCustomFormPage++;

                        $form.find('.form-page:visible').hide().next().show();
                        $('div[id$="_acqIntro"]').hide();
                        $('#btnPrev').show();
                        $('#btnNext').addClass('half-right');
                        if (BBCustomFormPage == BBCustomFormPages) {
                            $('#btnSubmitProxy').show();
                            $('#btnNext').hide();
                        } else {
                            $('#btnSubmitProxy').hide();
                        }

                        if ($('.form-page:visible > div:visible').length == 0) {
                            $('#btnNext:visible').click();
                        }

                    }

                }

            });

            $(document).on('click', '#btnPrev', function() {
                BBCustomFormPage--;

                $form.find('.form-page:visible').hide();
                $('#btnNext').show();
                $('#btnSubmitProxy').hide();

                if (BBCustomFormPage <= 1) {

                    $('#btnNext').removeClass('half-right');
                    $form.find('.form-page').first().show();
                    $('div[id$="_acqIntro"]').show();
                    $('#btnPrev').hide();
                } else {
                    $form.find('.form-page').eq(BBCustomFormPage - 1).show();
                    $('#btnPrev').show();
                }

                if ($('.form-page:visible > div:visible').length == 0) {
                    $('#btnPrev:visible').click();
                }

            });


        } else {

        } //END PAGEBREAKS

        //MATRIX FOR EVENT CATEGORY ON LOAD
        RunMatrix($('.event-category').val(), data.settings.Matrix);

        $(document).on('change', '.event-category', function() {
            RunMatrix($(this).val(), data.settings.Matrix);
        });

        $('input.address_search').each(function() {
            $.each(this.attributes, function(i, attrib) {
                var name = attrib.name;
                var value = attrib.value;
                if (name == "data-map-address" || name == "data-map-suburb" || name == "data-map-state" || "data-map-suburb") {
                    $('#customField' + value).parents('.custom-form').hide();
                }
            });
        });


        $('.hasDatepicker').datepicker({
            onClose: function() {
                $(this).valid();
            }
        });

        $(document).on('change input blur', '#InteractionAdd input, #InteractionAdd select', function() {
            $(this).valid();
        });

    }
    Sys.Application.add_load(function() {
        $('#btnSubmitProxy').attr('onclick', 'BBCustomFormSubmit();');
    });



    // add custom validator for phone numbers
    $.validator.addMethod("phone", function(phone_number, element) {
        var digits = "0123456789";
        var phoneNumberDelimiters = "()- ext.";
        var validWorldPhoneChars = phoneNumberDelimiters + "+";
        var minDigitsInIPhoneNumber = 10;
        s = stripCharsInBag(phone_number, validWorldPhoneChars);
        return this.optional(element) || isInteger(s) && s.length >= minDigitsInIPhoneNumber;
    }, "Please enter a valid phone number.");

    function isInteger(s) {
        var i;
        for (i = 0; i < s.length; i++) {
            // Check that current character is number.
            var c = s.charAt(i);
            if (((c < "0") || (c > "9"))) return false;
        } // All characters are numbers.
        return true;
    }

    function stripCharsInBag(s, bag) {
        var i;
        var returnString = "";
        // Search through string's characters one by one.
        // If character is not in bag, append to returnString.
        for (i = 0; i < s.length; i++) {
            // Check that current character isn't whitespace.
            var c = s.charAt(i);
            if (bag.indexOf(c) == -1) returnString += c;
        }
        return returnString;
    }

    function BBCustomFormSubmit() {

        if (jQuery.isFunction(jQuery.validator)) {
            var valid = $('#form1').validate({
                ignore: ":not(:visible)"
            }).form();

            if (valid || $("#form1").validate().errorList.length == 0) {
                var text = "";
                $('.custom-form').not('.hide, .hideMatrix').each(function() {
                    var label = $(this).children('label').not('.error').text().trim();
                    var heading = $(this).find('h2').text().trim();
                    if (!heading.length) {
                        var value = "";
                        if ($(this).find('.form-check').length > 0) {
                            var list = "";
                            $(this).find('.form-check').each(function() {

                                if ($(this).find('input[type="checkbox"]').is(':checked')) {
                                    list += $(this).find('label span').text() + ", ";
                                }
                            });
                            value = list.substring(0, list.length - 2);
                        } else if ($(this).find('input[type="checkbox"]').length) {
                            value = $(this).find('input[type="checkbox"]').is(':checked') ? "Yes" : "No";
                        } else if ($(this).find('select').length) {
                            value = $(this).find('select option:selected').text();
                        } else if ($(this).find('input').length) {
                            value = $(this).find('input').val();
                        }
                        if (value.length) {
                            text += label + "\n";
                            text += value + "\n\n";
                        }
                    } else {
                        text += "===" + heading + "===" + "\n\n"
                    }

                });
                $('div[id$="_divComment"] textarea').val(text);

                IAFSubmit();
            }
        }

    }

    function RunMatrix(EventCategoryID, Data) {
        $.each(Data[EventCategoryID], function(key, value) {
            if (!value) {
                $('#customField' + key).parents('.custom-form').addClass('hideMatrix');
            } else {
                $('#customField' + key).parents('.custom-form').removeClass('hideMatrix');
            }
        });
    }

    $(document).on('blur', '#InteractionAdd input[type=date], #InteractionAdd input[type=time]', function() {
        $(this).valid();
    });

    //TEMP NEED TO REMOVE LATER
    function IAFSubmit() {
        $('#InteractionAdd .form-wrap input').click();
    }
</script>
